{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}VideoTube{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="menu-btn" id="menuToggle">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
            </button>
            <a href="{% url 'home' %}" class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 90 20" preserveAspectRatio="xMidYMid meet" width="90" height="20">
                        <g>
                            <path
                                d="M27.9727 3.12324C27.6435 1.89323 26.6768 0.926623 25.4468 0.597366C23.2197 2.24288e-07 14.285 0 14.285 0C14.285 0 5.35042 2.24288e-07 3.12323 0.597366C1.89323 0.926623 0.926623 1.89323 0.597366 3.12324C2.24288e-07 5.35042 0 10 0 10C0 10 2.24288e-07 14.6496 0.597366 16.8768C0.926623 18.1068 1.89323 19.0734 3.12323 19.4026C5.35042 20 14.285 20 14.285 20C14.285 20 23.2197 20 25.4468 19.4026C26.6768 19.0734 27.6435 18.1068 27.9727 16.8768C28.5701 14.6496 28.5701 10 28.5701 10C28.5701 10 28.5677 5.35042 27.9727 3.12324Z"
                                fill="#FF0000"></path>
                            <path d="M11.4253 14.2854L18.8477 10.0004L11.4253 5.71533V14.2854Z" fill="white"></path>
                        </g>
                    </svg>
                </div>
                <span class="logo-text">Premium<sup class="logo-country">TR</sup></span>
            </a>
        </div>

        <div class="header-center">
            <form class="search-form" action="{% url 'home' %}" method="GET">
                <div class="search-container">
                    <input type="text" name="q" placeholder="Ara" value="{{ query|default:'' }}" class="search-input">
                    <button type="submit" class="search-btn">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                    </button>
                </div>
                <button type="button" class="voice-btn" title="Sesle ara">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor"
                            d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" />
                    </svg>
                </button>
            </form>
        </div>

        <div class="header-right">
            {% if user.is_authenticated %}
            <a href="{% url 'upload' %}" class="create-btn" title="Oluştur">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M14 13h-3v3H9v-3H6v-2h3V8h2v3h3v2zm3-7H3v12h14v-6.39l4 1.83V8.56l-4 1.83V6m1-1v3.83L22 7v8l-4-1.83V19H2V5h16z" />
                </svg>
                <span>Oluştur</span>
            </a>
            <button class="icon-btn notification-btn" title="Bildirimler">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M10 20h4c0 1.1-.9 2-2 2s-2-.9-2-2zm10-2.65V19H4v-1.65l2-1.88V11c0-2.96 1.67-5.47 4-6.32V4c0-1.1.9-2 2-2s2 .9 2 2v.68c2.33.85 4 3.36 4 6.32v4.47l2 1.88zm-4-.35V11c0-2.48-1.51-4.5-4-4.5S8 8.52 8 11v5h8z" />
                </svg>
                <span class="notification-badge">9+</span>
            </button>
            <a href="{% url 'channel' user.id %}" class="user-avatar" title="{{ user.username }}">
                {{ user.username|slice:":1"|upper }}
            </a>
            {% else %}
            <a href="{% url 'login' %}" class="signin-btn">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" />
                </svg>
                Oturum aç
            </a>
            {% endif %}
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <a href="{% url 'home' %}"
                class="sidebar-item {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M4 21V10.08l8-6.96 8 6.96V21h-6v-6h-4v6H4z" />
                </svg>
                <span>Ana Sayfa</span>
            </a>
            <a href="#" class="sidebar-item">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M10 14.65v-5.3L15 12l-5 2.65zm7.77-4.33c-.77-.32-1.2-.5-1.2-.5L18 9.06c1.84-.96 2.53-3.23 1.56-5.06s-3.24-2.53-5.07-1.56L6 6.94c-1.29.68-2.07 2.04-2 3.49.07 1.42.93 2.67 2.22 3.25.03.01 1.2.5 1.2.5L6 14.93c-1.83.97-2.53 3.24-1.56 5.07.97 1.83 3.24 2.53 5.07 1.56l8.5-4.5c1.29-.68 2.06-2.04 1.99-3.49-.07-1.42-.94-2.68-2.23-3.25z" />
                </svg>
                <span>Shorts</span>
            </a>

            {% if user.is_authenticated and user_subscriptions %}
            <hr class="sidebar-divider">
            <div class="sidebar-section-title">Abonelikler</div>

            {% for sub in user_subscriptions %}
            <a href="{% url 'channel' sub.channel.id %}" class="sidebar-item subscription-item">
                <div class="sub-avatar"
                    style="background: linear-gradient(135deg, #{{ sub.channel.id|stringformat:'06x'|slice:':6' }}, #{{ sub.channel.id|stringformat:'06x'|slice:':6'|add:'33' }});">
                    {{ sub.channel.username|slice:":1"|upper }}
                </div>
                <span>{{ sub.channel.username }}</span>
            </a>
            {% endfor %}
            {% endif %}

            <hr class="sidebar-divider">
            <div class="sidebar-section-title">Siz ></div>

            <a href="#" class="sidebar-item">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M14.97 16.95L10 13.87V7h2v5.76l4.03 2.49-1.06 1.7zM22 12c0 5.51-4.49 10-10 10S2 17.51 2 12h1c0 4.96 4.04 9 9 9s9-4.04 9-9-4.04-9-9-9C8.81 3 5.92 4.64 4.28 7.38c-.11.18-.22.37-.31.56l-.09.18-.06.12-.06.14-.05.13-.05.12-.04.13-.04.12-.03.1-.03.11-.03.12-.02.1-.02.1-.02.1-.02.11-.01.1-.01.1-.01.1L3 10h3l-4 4-4-4h3c0-5.52 4.48-10 10-10s10 4.48 10 10z" />
                </svg>
                <span>Geçmiş</span>
            </a>
            <a href="#" class="sidebar-item">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M18.5 3H6c-.55 0-1 .45-1 1v7H3v2h2v7c0 .55.45 1 1 1h12.5c.83 0 1.5-.67 1.5-1.5v-15c0-.83-.67-1.5-1.5-1.5zm-7 14H7v-2h4.5v2zm0-4H7v-2h4.5v2zm0-4H7V7h4.5v2zm4.5 8h-3V7h3v10z" />
                </svg>
                <span>Oynatma listeleri</span>
            </a>
            <a href="#" class="sidebar-item">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor"
                        d="M12 3.67c-4.58 0-8.33 3.75-8.33 8.33s3.75 8.33 8.33 8.33 8.33-3.75 8.33-8.33S16.58 3.67 12 3.67zm3.21 11.29-4.04-2.34V7.5h1.67v4.14l3.04 1.76-.67 1.56z" />
                </svg>
                <span>Daha sonra izle</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}
    </main>

    <script src="{% static 'core/js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>

</html>